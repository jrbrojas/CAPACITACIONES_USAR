<app-breadcrumb [title]="'Crear Nuevo Usuario'" [items]="['Seguridad','Usuarios']" [active_item]="'Crear'">
</app-breadcrumb>


<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <form class="needs-validation" novalidate [formGroup]="createUser">
                        <h6>Datos de Usuarios</h6>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>TITULO</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="0">Elegir...</ng-option>
                                        <ng-option value="1">Prof.</ng-option>
                                        <ng-option value="2">Dr.</ng-option>
                                        <ng-option value="3">Sra.</ng-option>
                                        <ng-option value="4">Sr.</ng-option>
                                        <ng-option value="5">Otro</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>GENERO</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="0">Elegir...</ng-option>
                                        <ng-option value="1">Femenino</ng-option>
                                        <ng-option value="2">Masculino</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>TIPO DOCUMENTO</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="1">DNI</ng-option>
                                        <ng-option value="2">PASAPORTE</ng-option>
                                        <ng-option value="3">CARNET DE EXTRANJERIA</ng-option>
                                        <ng-option value="4">OTRO DOCUMENTO</ng-option>
                                    </ng-select>
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group" *ngIf="createUser.get('idTipoDocumento')?.value != '1' &&
                                        createUser.get('idTipoDocumento')?.value != '2' &&
                                        createUser.get('idTipoDocumento')?.value != '3' &&
                                        createUser.get('idTipoDocumento')?.value != '4'">
                                    <label>N&Uacute;MERO DE DOCUMENTO</label>
                                    <input type="text" class="form-control" formControlName="numeroDocumento">
                                    <button matSuffix mat-icon-button (click)="consultarDni()" >
                                        <mat-icon>search</mat-icon>
                                    </button>
                                </div>
                                <div class="form-group" *ngIf="createUser.get('idTipoDocumento')?.value != '2' &&
                                    createUser.get('idTipoDocumento')?.value != '3' &&
                                    createUser.get('idTipoDocumento')?.value != '4' &&
                                    createUser.get('idTipoDocumento')?.value != ''">
                                    <label>N&Uacute;MERO DE DOCUMENTO (DNI)</label>
                                    <input type="text" class="form-control" pattern="[0-9]{8}"
                                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                        maxlength="8" formControlName="numeroDocumento">
                                    <button matSuffix mat-icon-button (click)="consultarDni()">
                                            <mat-icon>search</mat-icon>
                                    </button>
                                        <span style="color: #ff0000;"
                                        *ngIf="this.createUser.get('numeroDocumento')?.errors?.['required']">
                                        (El dni no puede quedar vac&iacute;o)
                                    </span>
                                </div>
                                <div class="form-group" *ngIf="createUser.get('idTipoDocumento')?.value != '1' &&
                                        createUser.get('idTipoDocumento')?.value != '3' &&
                                        createUser.get('idTipoDocumento')?.value != '4' &&
                                        createUser.get('idTipoDocumento')?.value != ''">
                                    <label>N&Uacute;MERO DE DOCUMENTO (PASAPORTE)</label>
                                    <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" maxlength="12"
                                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                        formControlName="numeroDocumento">
                                        <button matSuffix mat-icon-button (click)="consultarDni()">
                                            <mat-icon>search</mat-icon>
                                        </button>
                                    <span style="color: #ff0000;"
                                        *ngIf="this.createUser.get('numeroDocumento')?.errors?.['required']">
                                        (El pasaporte no puede quedar vac&iacute;o)
                                    </span>
                                </div>
                                <div class="form-group" *ngIf="createUser.get('idTipoDocumento')?.value != '1' &&
                                        createUser.get('idTipoDocumento')?.value != '2' &&
                                        createUser.get('idTipoDocumento')?.value != '4' &&
                                        createUser.get('idTipoDocumento')?.value != ''">
                                    <label>N&Uacute;MERO DE DOCUMENTO (CARNET DE EXTRANJER&Iacute;A)</label>
                                    <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control"
                                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                        maxlength="12" formControlName="numeroDocumento">
                                        <button matSuffix mat-icon-button (click)="consultarDni()">
                                            <mat-icon>search</mat-icon>
                                        </button>
                                    <span style="color: #ff0000;"
                                        *ngIf="this.createUser.get('numeroDocumento')?.errors?.['required']">
                                        (El carnet de extranjer&iacute;a no puede quedar vac&iacute;o)
                                    </span>
                                </div>
                                <div class="form-group" *ngIf="createUser.get('idTipoDocumento')?.value != '1' &&
                                        createUser.get('idTipoDocumento')?.value != '2' &&
                                        createUser.get('idTipoDocumento')?.value != '3' &&
                                        createUser.get('idTipoDocumento')?.value != ''">
                                    <label>N&Uacute;MERO DE DOCUMENTO (OTROS DOCUMENTOS)</label>
                                    <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control"
                                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                        maxlength="15" formControlName="numeroDocumento">
                                        <button matSuffix mat-icon-button (click)="consultarDni()">
                                            <mat-icon>search</mat-icon>
                                        </button>
                                    <span style="color: #ff0000;"
                                        *ngIf="this.createUser.get('numeroDocumento')?.errors?.['required']">
                                        (Otros Documentos no puede quedar vac&iacute;o)
                                    </span>
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group ">
                                    <div class="form-group">
                                        <label>NOMBRES</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="nombres" >
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>APELLIDOS</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="apellidos">
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>PAÍS DE RESIDENCIA</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="1">Peru</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>DEPARTAMENTO DE RESIDENCIA</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="1">Lima</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>PROVINCIA DE RESIDENCIA</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="1">Lima</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>DISTRITO DE RESIDENCIA</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="1">Lince</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>DIRECCION DE RESIDENCIA</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="direccion">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>CODIGO POSTAL DE RESIDENCIA</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="codigpostal">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>CELULAR</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="codigpostal">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>TELEFONO</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="telefono">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>FAX</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="FAX">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>ORGANIZACION / INSTITUCIÓN</label>
                                    <ng-select formControlName="idTipoDocumento" placeholder="Seleccione">
                                        <ng-option value="1">Coen</ng-option>
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>CARGO</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="text" class="form-control" formControlName="cago">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h6 >Usuarios</h6>
                        <hr>
                        <div class="row" >
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label>USUARIO</label>
                                        <input onkeyup="this.value=this.value.toUpperCase();" type="number" readonly [value]="createUser.get('numeroDocumento')?.value"
                                            class="form-control" formControlName="username">
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group ">
                                    <div class="form-group">
                                        <label>CONTRASE&Ntilde;A</label>
                                        <input type="password" class="form-control" formControlName="password">
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-3">
                                <div class="form-group ">
                                    <div class="form-group">
                                        <label>EMAIL</label>
                                        <input type="text" class="form-control" formControlName="email" onchange="ValidacionEmail()"
                                            placeholder="Ex. pat@example.com">
                                        <span style="color: #ff0000;"
                                            *ngIf="this.createUser.get('email')?.errors?.['required']">
                                            (El mail no puede quedar vac&iacute;o)
                                        </span>
                                        <span style="color: #ff0000;"
                                            *ngIf="this.createUser.get('email')?.errors?.['email']">
                                            (El mail no es v&aacute;lido)
                                        </span>
                                    </div>
                                </div>
                            </div>


                        </div>


                        <div class="col-sm-3">
                            <div class="form-group">
                                <label [hidden]="HabilitarPerfil" >PERFILES</label>
                                <ng-container>
                                    <ng-container>
                                        <ng-select formControlName="idPerfil" [items]="selectProfile" [hidden]="HabilitarPerfil"
                                            bindLabel="nombre" bindValue="id" (change)="getSelectProfile($event)"
                                            placeholder="Seleccione" [multiple]="false">
                                        </ng-select>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col">
                                <div class="form-group mb-0">
                                    <button type="button" class="btn btn-primary mr-3" >
                                        <span>Guardar</span>
                                    </button>
                                    <button type="button" class="btn btn-danger"
                                        (click)="cancelProject()">Cancelar</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
